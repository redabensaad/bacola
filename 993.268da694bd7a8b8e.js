"use strict";(self.webpackChunkbacola=self.webpackChunkbacola||[]).push([[993],{993:(vt,P,a)=>{a.r(P),a.d(P,{AccountModule:()=>_t});var m=a(1780),O=a(4080),t=a(7705),g=a(7094),F=a(582),p=a(177);const T=function(){return{exact:!0}};function y(n,r){if(1&n&&(t.j41(0,"li")(1,"a",7),t.EFF(2),t.k0s()()),2&n){const e=r.$implicit;t.R7$(1),t.Y8G("routerLink",e.path)("routerLinkActiveOptions",t.lJ4(3,T)),t.R7$(1),t.SpI(" ",e.name," ")}}let D=(()=>{class n{constructor(e,o){this.message=e,this.loggedService=o,this.menus=O.Dx}logout(){this.loggedService.logout(),this.message.success("Vous \xeates d\xe9connect\xe9 avec succ\xe8s !")}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(g.xh),t.rXU(F.k))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-page-account"]],decls:13,vars:1,consts:[[1,"container"],[1,"breadcrumb"],["routerLink","/"],[1,"navbar-account","l-none"],[4,"ngFor","ngForOf"],[1,"hidden-lg-down"],["routerLink","/",1,"font-3","f-15","f-600","t-upper",3,"click"],["routerLinkActive","active",1,"font-3","f-600","t-upper",3,"routerLink","routerLinkActiveOptions"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"ul",1)(2,"li")(3,"a",2),t.EFF(4,"Accueil"),t.k0s()(),t.j41(5,"li"),t.EFF(6,"Mon compte"),t.k0s()(),t.j41(7,"ul",3),t.DNE(8,y,3,4,"li",4),t.j41(9,"li",5)(10,"a",6),t.bIt("click",function(){return i.logout()}),t.EFF(11," D\xe9connexion "),t.k0s()()(),t.nrm(12,"router-outlet"),t.k0s()),2&o&&(t.R7$(8),t.Y8G("ngForOf",i.menus))},dependencies:[m.n3,m.Wk,m.wQ,p.Sq],styles:['.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{align-items:center}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{position:relative;display:flex}@media (max-width: 991.98px){.navbar-account[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px;border:1px solid var(--bs-border1)}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:flex;width:100%}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%]{border-top:1px solid var(--bs-border1)}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{width:100%;font-size:.875rem;padding:.9375rem 1.25rem;color:var(--bs-text1)}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus{background-color:var(--bs-info3)}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a.active[_ngcontent-%COMP%]{color:var(--bs-white);background-color:var(--bs-primary1)}}@media (min-width: 992px){.navbar-account[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;margin-top:40px;margin-bottom:40px;border-bottom:1px solid var(--bs-border1)}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-flex;white-space:nowrap;margin-right:1.875rem}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-size:1.0625rem;padding:.9375rem 0;color:var(--bs-info1)}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus{color:var(--bs-info2)}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a.active[_ngcontent-%COMP%]{color:var(--bs-text1)}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:before{position:absolute;content:"";width:100%;height:3px;bottom:-1px;visibility:hidden;opacity:0;background-color:var(--bs-secondary1);transition:all .2s ease-in-out 0s}.navbar-account[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a.active[_ngcontent-%COMP%]:before{visibility:visible;opacity:1}}'],changeDetection:0})}return n})();var z=a(6697),h=a(8141),v=a(980),M=a(5288),x=a(5436),R=a(8633),E=a(513),C=a(6389),b=a(5930),A=a(5682);function $(n,r){1&n&&t.nrm(0,"span",3)}function S(n,r){1&n&&t.nrm(0,"span",27)}function V(n,r){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td",17),t.EFF(2),t.k0s(),t.j41(3,"td",18),t.EFF(4),t.nI1(5,"date"),t.k0s(),t.j41(6,"td",19),t.EFF(7),t.k0s(),t.j41(8,"td",20),t.EFF(9),t.k0s(),t.j41(10,"td",21),t.nrm(11,"app-price",22),t.k0s(),t.j41(12,"td",12)(13,"button",23),t.bIt("click",function(){const c=t.eBV(e).$implicit,u=t.XpG(3);return t.Njj(u.traking(c))}),t.EFF(14," Suivre "),t.k0s()(),t.j41(15,"td",13)(16,"a",24),t.bIt("click",function(){const c=t.eBV(e).$implicit,u=t.XpG(3);return t.Njj(u.remove(c))}),t.nrm(17,"i",25),t.DNE(18,S,1,0,"span",26),t.k0s()()()}if(2&n){const e=r.$implicit;t.R7$(2),t.SpI(" ",e.n," "),t.R7$(2),t.SpI(" ",t.i5U(5,6,e.cdate,"MMM dd, yyyy")," "),t.R7$(3),t.SpI(" ",e.payment," "),t.R7$(2),t.SpI(" ",e.customer.email," "),t.R7$(2),t.Y8G("price",e.total),t.R7$(7),t.Y8G("ngIf",e.spinner)}}function N(n,r){1&n&&(t.j41(0,"p",28),t.EFF(1," Aucune commande \xe0 afficher pour l'instant ! "),t.k0s())}function I(n,r){1&n&&(t.j41(0,"a",29),t.EFF(1," Voir la boutique "),t.k0s())}function G(n,r){if(1&n&&(t.qex(0),t.j41(1,"div",5)(2,"table",6)(3,"thead")(4,"tr")(5,"th",7),t.EFF(6,"N\xb0 de commande"),t.k0s(),t.j41(7,"th",8),t.EFF(8," Date "),t.k0s(),t.j41(9,"th",9),t.EFF(10," M\xe9thode de paiement "),t.k0s(),t.j41(11,"th",10),t.EFF(12," E-mail de facturation "),t.k0s(),t.j41(13,"th",11),t.EFF(14,"Total"),t.k0s(),t.nrm(15,"th",12)(16,"th",13),t.k0s()(),t.j41(17,"tbody"),t.DNE(18,V,19,9,"tr",14),t.k0s()(),t.DNE(19,N,2,0,"p",15),t.k0s(),t.DNE(20,I,2,0,"a",16),t.bVm()),2&n){const e=r.ngIf;t.R7$(7),t.xc7("width","180px"),t.R7$(2),t.xc7("width","200px"),t.R7$(2),t.xc7("width","260px"),t.R7$(2),t.xc7("width","180px"),t.R7$(2),t.xc7("width","140px"),t.R7$(1),t.xc7("width","48px"),t.R7$(2),t.Y8G("ngForOf",e),t.R7$(1),t.Y8G("ngIf",0==e.length),t.R7$(1),t.Y8G("ngIf",0==e.length)}}function L(n,r){if(1&n&&t.DNE(0,G,21,15,"ng-container",4),2&n){const e=t.XpG();t.Y8G("ngIf",e.orders)}}let U=(()=>{class n{constructor(e,o,i,c){this.router=e,this.cdk=o,this.message=i,this.orderService=c,this._fetch=new M.F(this.cdk)}get isLoading(){return this._fetch.isLoading}get orders(){return this._fetch.data}ngOnInit(){this._fetch.load(this.orderService.getOrders())}traking(e){this.message.success(`Votre commande a bien \xe9t\xe9 suivie avec succ\xe8s. Un email de confirmation va vous parvenir d'ici quelques instants. L'email que vous avez renseign\xe9 est : ${e.customer.email}.`),this.router.navigate(["/guest","order-received",e.n])}_setSpinner(e,o){e.spinner=o,this.cdk.markForCheck()}_deleteOrder(e){const o=this.orders?.filter(i=>i.n!==e);o&&this._fetch.updateData(o)}remove(e){this._setSpinner(e,!0),this.orderService.removeOrder(e.n).pipe((0,z.s)(1),(0,h.M)(()=>{this._deleteOrder(e.n)}),(0,v.j)(()=>{this._setSpinner(e,!1)})).subscribe()}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(m.Ix),t.rXU(t.gRc),t.rXU(g.xh),t.rXU(x.A))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-page-orders"]],decls:5,vars:2,consts:[[1,"t-title","f-500","t-text2"],["nz-icon","","nzType","loading","class","spinner-30",4,"ngIf","ngIfElse"],["ordersTmpl",""],["nz-icon","","nzType","loading",1,"spinner-30"],[4,"ngIf"],[1,"br-border1"],[1,"table","table-border"],[1,"t-left"],[1,"t-left","hidden-sm-down"],[1,"t-left","hidden-md-down"],[1,"t-left","hidden-lg-down"],[1,"t-right"],[1,"t-center"],[1,"t-center","hidden-xs-down"],[4,"ngFor","ngForOf"],["class","f-13 f-500 t-empty",4,"ngIf"],["nz-button","","class","btn-primary btn-large m-t-20","routerLink","/shoping",4,"ngIf"],[1,"f-600"],[1,"hidden-sm-down"],[1,"hidden-md-down"],[1,"hidden-lg-down"],[1,"f-600","t-price","t-right"],[3,"price"],["nz-button","","nzSize","small",1,"btn-primary","btn-large",3,"click"],["title","Supprimer",1,"icon","icon-sm","icon-cancel","m-auto",3,"click"],[1,"klbth-cancel"],["nz-icon","","nzType","loading","class","spinner",4,"ngIf"],["nz-icon","","nzType","loading",1,"spinner"],[1,"f-13","f-500","t-empty"],["nz-button","","routerLink","/shoping",1,"btn-primary","btn-large","m-t-20"]],template:function(o,i){if(1&o&&(t.j41(0,"h2",0),t.EFF(1,"Liste des commandes"),t.k0s(),t.DNE(2,$,1,0,"span",1),t.DNE(3,L,1,1,"ng-template",null,2,t.C5r)),2&o){const c=t.sdS(4);t.R7$(2),t.Y8G("ngIf",i.isLoading)("ngIfElse",c)}},dependencies:[m.Wk,p.Sq,p.bT,R.Dn,E.aO,C.c,b.p,A.F,p.vh],encapsulation:2,changeDetection:0})}return n})(),Y=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-page-downloads"]],decls:18,vars:10,consts:[[1,"t-title","f-500","t-text2"],[1,"br-border1"],[1,"table","table-border"],[1,"t-left"],[1,"t-left","hidden-sm-down"],[1,"t-left","hidden-md-down"],[1,"t-left","hidden-lg-down"],[1,"t-center"],[1,"t-center","hidden-xs-down"],[1,"t-empty"]],template:function(o,i){1&o&&(t.j41(0,"h2",0),t.EFF(1,"Liste des t\xe9l\xe9chargements"),t.k0s(),t.j41(2,"div",1)(3,"table",2)(4,"thead")(5,"tr")(6,"th",3),t.EFF(7,"Nom du fichier"),t.k0s(),t.j41(8,"th",4),t.EFF(9," Date "),t.k0s(),t.j41(10,"th",5),t.EFF(11," Dossier "),t.k0s(),t.j41(12,"th",6),t.EFF(13," Type "),t.k0s(),t.nrm(14,"th",7)(15,"th",8),t.k0s()()(),t.j41(16,"p",9),t.EFF(17,"Aucun fichier \xe0 afficher pour l'instant !"),t.k0s()()),2&o&&(t.R7$(8),t.xc7("width","180px"),t.R7$(2),t.xc7("width","200px"),t.R7$(2),t.xc7("width","160px"),t.R7$(2),t.xc7("width","140px"),t.R7$(1),t.xc7("width","48px"))},encapsulation:2,changeDetection:0})}return n})();var s=a(4341),l=a(6315),w=a(2289),f=a(7529),d=a(8927),k=a(1011);function B(n,r){1&n&&(t.qex(0),t.EFF(1," Ce champ est requis "),t.bVm())}function X(n,r){1&n&&(t.qex(0),t.EFF(1," Veuillez saisir un code postal valide ! "),t.bVm())}function q(n,r){if(1&n&&(t.DNE(0,B,2,0,"ng-container",18),t.DNE(1,X,2,0,"ng-container",18)),2&n){const e=r.$implicit;t.Y8G("ngIf",e.hasError("required")),t.R7$(1),t.Y8G("ngIf",e.hasError("pattern"))}}function J(n,r){1&n&&(t.qex(0),t.EFF(1," Ce champ est requis "),t.bVm())}function Q(n,r){1&n&&(t.qex(0),t.EFF(1," Veuillez saisir un t\xe9l\xe9phone valide ! "),t.bVm())}function W(n,r){if(1&n&&(t.DNE(0,J,2,0,"ng-container",18),t.DNE(1,Q,2,0,"ng-container",18)),2&n){const e=r.$implicit;t.Y8G("ngIf",e.hasError("required")),t.R7$(1),t.Y8G("ngIf",e.hasError("pattern"))}}const H=function(){return{minRows:5,maxRows:5}};let Z=(()=>{class n{constructor(e,o,i,c){this.cdk=e,this.fb=o,this.message=i,this.checkoutService=c,this.loadingCustomer=!1}ngOnInit(){this._customer=this.checkoutService.fetchCustomer(),this._initForm()}_initPattern(){this._postalReg=/^[0-9]{5}$/,this._phoneReg=/^[0]{1}[0-9]{8,9}$/}_customerAttr(e){return this._customer&&this._customer[e]?this._customer[e]:""}_initForm(){this._initPattern(),this.customerForm=this.fb.group({tradname:[this._customerAttr(l.GB.TRADNAME)],address:[this._customerAttr(l.GB.ADDRESS),[s.k0.required]],state:[this._customerAttr(l.GB.STATE),[s.k0.required]],postal:[this._customerAttr(l.GB.POSTAL),[s.k0.required,s.k0.pattern(this._postalReg)]],phone:[this._customerAttr(l.GB.PHONE),[s.k0.required,s.k0.pattern(this._phoneReg)]]})}_isValidForm(){return!this.customerForm.invalid||(Object.values(this.customerForm.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))}),!1)}_setLoadingCustomer(e){this.loadingCustomer=e,this.cdk.markForCheck()}_parseCustomer(){const e=this.customerForm.controls;return{tradname:e.tradname.value,address:e.address.value,state:e.state.value,postal:e.postal.value,phone:e.phone.value}}submitForm(){this._isValidForm()&&(this._setLoadingCustomer(!0),this._customer=this._parseCustomer(),this.checkoutService.storeCustomer(this._customer).pipe((0,z.s)(1),(0,h.M)(()=>{this.message.success("Vos informations de facturations sont mises \xe0 jour avec succ\xe8s.")}),(0,v.j)(()=>{this._setLoadingCustomer(!1)})).subscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(s.Qk),t.rXU(g.xh),t.rXU(w.Q))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-page-addresses"]],decls:37,vars:6,consts:[[1,"t-title","f-500","t-text2"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[1,"m-t-20"],["nzFor","tradname"],["nz-input","","id","tradname","type","text","formControlName","tradname"],["nzFor","address"],["nzErrorTip","Ce champ est requis"],["nz-input","","id","address","placeholder","Num\xe9ro de maison, nom de rue, appartement, etc.","formControlName","address",3,"nzAutosize"],["nzFor","state"],["nz-input","","id","state","type","text","formControlName","state"],["nzFor","postal"],[3,"nzErrorTip"],["nz-input","","id","postal","type","text","formControlName","postal"],["postalTmpl",""],["nzFor","phone"],["nz-input","","id","phone","type","text","formControlName","phone"],["phoneTmpl",""],["nz-button","","nzSize","small",1,"btn-primary","btn-large",3,"nzLoading"],[4,"ngIf"]],template:function(o,i){if(1&o&&(t.j41(0,"h2",0),t.EFF(1,"Infos de facturation par d\xe9faut"),t.k0s(),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return i.submitForm()}),t.j41(3,"nz-form-item",2)(4,"nz-form-label",3),t.EFF(5," Nom de l'entreprise (facultatif) "),t.k0s(),t.j41(6,"nz-form-control"),t.nrm(7,"input",4),t.k0s()(),t.j41(8,"nz-form-item",2)(9,"nz-form-label",5),t.EFF(10," Adresse * "),t.k0s(),t.j41(11,"nz-form-control",6)(12,"textarea",7),t.EFF(13,"            "),t.k0s()()(),t.j41(14,"nz-form-item",2)(15,"nz-form-label",8),t.EFF(16," Ville * "),t.k0s(),t.j41(17,"nz-form-control",6),t.nrm(18,"input",9),t.k0s()(),t.j41(19,"nz-form-item",2)(20,"nz-form-label",10),t.EFF(21," Code postal * "),t.k0s(),t.j41(22,"nz-form-control",11),t.nrm(23,"input",12),t.DNE(24,q,2,2,"ng-template",null,13,t.C5r),t.k0s()(),t.j41(26,"nz-form-item",2)(27,"nz-form-label",14),t.EFF(28," T\xe9l\xe9phone * "),t.k0s(),t.j41(29,"nz-form-control",11),t.nrm(30,"input",15),t.DNE(31,W,2,2,"ng-template",null,16,t.C5r),t.k0s()(),t.j41(33,"nz-form-item",2)(34,"nz-form-control")(35,"button",17),t.EFF(36," Enregistrer "),t.k0s()()()()),2&o){const c=t.sdS(25),u=t.sdS(32);t.R7$(2),t.Y8G("formGroup",i.customerForm),t.R7$(10),t.Y8G("nzAutosize",t.lJ4(5,H)),t.R7$(10),t.Y8G("nzErrorTip",c),t.R7$(7),t.Y8G("nzErrorTip",u),t.R7$(6),t.Y8G("nzLoading",i.loadingCustomer)}},dependencies:[p.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,f.Uq,f.e,d.CA,d.Ls,d.Mo,d.zS,k.Sy,k.c9,E.aO,C.c,b.p],encapsulation:2,changeDetection:0})}return n})();var K=a(9172),j=a(4397);function tt(n,r){1&n&&(t.qex(0),t.EFF(1," Ce champ est requis "),t.bVm())}function et(n,r){1&n&&(t.qex(0),t.EFF(1," Le nom d'utilisateur doit contenir au moin 3 caract\xe8res ! "),t.bVm())}function nt(n,r){if(1&n&&(t.DNE(0,tt,2,0,"ng-container",27),t.DNE(1,et,2,0,"ng-container",27)),2&n){const e=r.$implicit;t.Y8G("ngIf",e.hasError("required")),t.R7$(1),t.Y8G("ngIf",e.hasError("minlength"))}}function ot(n,r){1&n&&(t.qex(0),t.EFF(1," Ce champ est requis "),t.bVm())}function rt(n,r){1&n&&(t.qex(0),t.EFF(1," Veuillez saisir une adresse email valide ! "),t.bVm())}function st(n,r){if(1&n&&(t.DNE(0,ot,2,0,"ng-container",27),t.DNE(1,rt,2,0,"ng-container",27)),2&n){const e=r.$implicit;t.Y8G("ngIf",e.hasError("required")),t.R7$(1),t.Y8G("ngIf",e.hasError("email"))}}function it(n,r){1&n&&(t.qex(0),t.EFF(1," Ce champ est requis "),t.bVm())}function at(n,r){1&n&&(t.qex(0),t.EFF(1," Les mots de passe entr\xe9s sont diff\xe9rents ! "),t.bVm())}function ct(n,r){if(1&n&&(t.DNE(0,it,2,0,"ng-container",27),t.DNE(1,at,2,0,"ng-container",27)),2&n){const e=r.$implicit;t.Y8G("ngIf",e.hasError("required")),t.R7$(1),t.Y8G("ngIf",e.hasError("confirm"))}}function mt(n,r){1&n&&(t.qex(0),t.EFF(1," Ce champ est requis "),t.bVm())}function lt(n,r){1&n&&(t.qex(0),t.EFF(1," Le mot de passe doit contenir au moin 6 caract\xe8res ! "),t.bVm())}function ut(n,r){if(1&n&&(t.DNE(0,mt,2,0,"ng-container",27),t.DNE(1,lt,2,0,"ng-container",27)),2&n){const e=r.$implicit;t.Y8G("ngIf",e.hasError("required")),t.R7$(1),t.Y8G("ngIf",e.hasError("minlength"))}}function pt(n,r){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"p",1),t.EFF(2," Bonjour "),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.EFF(5," ! (Ce n'est pas vous ? "),t.j41(6,"a",2),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.logout())}),t.EFF(7,"D\xe9connexion"),t.k0s(),t.EFF(8,"). "),t.k0s(),t.j41(9,"p",3),t.EFF(10," Depuis votre compte, vous pouvez consulter vos "),t.j41(11,"a",4),t.EFF(12,"commandes"),t.k0s(),t.EFF(13,", g\xe9rer vos "),t.j41(14,"a",5),t.EFF(15,"adresses de facturations"),t.k0s(),t.EFF(16,", et modifier vos "),t.j41(17,"a",6),t.EFF(18,"informations de connexion"),t.k0s(),t.EFF(19,". "),t.k0s(),t.bVm()}if(2&n){const e=r.ngIf;t.R7$(4),t.JRh(e.username)}}const gt=[{path:"",component:D,children:[{path:"orders",component:U,title:"Commandes - Bacola Mon compte"},{path:"downloads",component:Y,title:"T\xe9l\xe9chargements - Bacola Mon compte"},{path:"addresses",component:Z,title:"Facturations - Bacola Mon compte"},{path:"details",component:(()=>{class n{constructor(e,o,i,c,u){this.cdk=e,this.fb=o,this.message=i,this.loggedService=c,this.authService=u,this.loadingUser=!1,this._passwordValidator=_=>_.value?_.value!==this.passwordForm.controls.newPassword.value?{confirm:!0,error:!0}:{}:{required:!0}}ngOnInit(){this._initForm()}_userAttr(e){return this._user&&this._user[e]?this._user[e]:""}_initPassword(){this.passwordForm=this.fb.group({currPassword:["",[s.k0.required,s.k0.minLength(6)]],newPassword:[""],checkPassword:[""]},{updateOn:"blur"})}_initUser(){this._user=this.loggedService.user,this.userForm=this.fb.group({firstname:[this._userAttr(l.j3.FIRSTNAME)],lastname:[this._userAttr(l.j3.LASTNAME)],username:[this._userAttr(l.j3.USERNAME),[s.k0.required,s.k0.minLength(3)]],email:[this._userAttr(l.j3.EMAIL),[s.k0.required,s.k0.email]],password:this.passwordForm})}_passwordChange(e){""!==e.trim()?(this.passwordForm.controls.newPassword.addValidators(s.k0.minLength(6)),this.passwordForm.controls.checkPassword.addValidators([s.k0.required,this._passwordValidator])):(this.passwordForm.controls.newPassword.clearValidators(),this.passwordForm.controls.checkPassword.clearValidators()),this.passwordForm.controls.newPassword.markAsPristine(),this.passwordForm.controls.newPassword.updateValueAndValidity(),this.passwordForm.controls.checkPassword.markAsPristine(),this.passwordForm.controls.checkPassword.updateValueAndValidity()}_initForm(){this._initPassword(),this._initUser(),this.passwordForm.controls.newPassword.valueChanges.pipe((0,K.Z)(this.passwordForm.controls.newPassword.value),(0,h.M)(e=>{this._passwordChange(e)})).subscribe()}_isValidForm(){return!this.userForm.invalid||(this.userForm.controls.password.invalid?(Object.values(this.userForm.controls.password.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity())}),!1):(Object.values(this.userForm.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))}),!1))}_setLoadingUser(e){this.loadingUser=e,this.cdk.markForCheck()}_parseUser(){const e=this.userForm.controls;return this._user.username=e.username.value,this._user.email=e.email.value,this._user.firstname=e.firstname.value,this._user.lastname=e.lastname.value,""!==this.passwordForm.controls.newPassword.value.trim()&&(this._user.password=this.passwordForm.controls.newPassword.value),this._user}_fetchResult(e){e?(this.loggedService.update(this._parseUser()),this.message.success("Vos informations de connexion sont mises \xe0 jour avec succ\xe8s."),this.passwordForm.reset()):this.message.error("Votre mot de passe actuel est invalide !")}submitForm(){this._isValidForm()&&(this._setLoadingUser(!0),this.authService.check(this.passwordForm.controls.currPassword.value).pipe((0,h.M)(e=>{this._fetchResult(e)}),(0,v.j)(()=>{this._setLoadingUser(!1)})).subscribe())}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(t.gRc),t.rXU(s.Qk),t.rXU(g.xh),t.rXU(F.k),t.rXU(j.u))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-page-details"]],decls:55,vars:6,consts:[[1,"t-title","f-500","t-text2"],["nz-form","","nzLayout","vertical",3,"formGroup","ngSubmit"],[1,"m-t-20"],["nzFor","firstname"],["nz-input","","id","firstname","type","text","formControlName","firstname"],["nzFor","lastname"],["nz-input","","id","lastname","type","text","formControlName","lastname"],["nzFor","username"],[3,"nzErrorTip"],["nz-input","","formControlName","username","id","username","type","text"],["usernameTmpl",""],["nzFor","email"],["nz-input","","formControlName","email","id","email","type","email"],["emailTmpl",""],["formGroupName","password",1,"m-t-20"],[1,"f-15","f-600","t-text2"],["nzFor","newPassword"],["nzErrorTip","Le nouveau mot de passe doit contenir au moin 6 caract\xe8res !"],["nz-input","","formControlName","newPassword","id","newPassword","type","password"],["nzFor","checkPassword"],["nz-input","","formControlName","checkPassword","id","checkPassword","type","password"],["checkPasswordTmpl",""],["nzFor","currPassword"],["nz-input","","formControlName","currPassword","id","currPassword","type","password"],["currPasswordTmpl",""],[1,"t-italic","m-t-5"],["nz-button","","nzSize","small",1,"btn-primary","btn-large",3,"nzLoading"],[4,"ngIf"]],template:function(o,i){if(1&o&&(t.j41(0,"h2",0),t.EFF(1,"Informations de connexion"),t.k0s(),t.j41(2,"form",1),t.bIt("ngSubmit",function(){return i.submitForm()}),t.j41(3,"nz-form-item",2)(4,"nz-form-label",3),t.EFF(5," Nom "),t.k0s(),t.j41(6,"nz-form-control"),t.nrm(7,"input",4),t.k0s()(),t.j41(8,"nz-form-item",2)(9,"nz-form-label",5),t.EFF(10," Pr\xe9nom "),t.k0s(),t.j41(11,"nz-form-control"),t.nrm(12,"input",6),t.k0s()(),t.j41(13,"nz-form-item",2)(14,"nz-form-label",7),t.EFF(15," Nom d'utilisateur * "),t.k0s(),t.j41(16,"nz-form-control",8),t.nrm(17,"input",9),t.DNE(18,nt,2,2,"ng-template",null,10,t.C5r),t.k0s()(),t.j41(20,"nz-form-item",2)(21,"nz-form-label",11),t.EFF(22," Adresse e-mail * "),t.k0s(),t.j41(23,"nz-form-control",8),t.nrm(24,"input",12),t.DNE(25,st,2,2,"ng-template",null,13,t.C5r),t.k0s()(),t.j41(27,"div",14)(28,"p",15),t.EFF(29,"Modifier le mot de passe"),t.k0s(),t.j41(30,"nz-form-item",2)(31,"nz-form-label",16),t.EFF(32," Nouveau mot de passe (Laisser vide si vous ne souhaitez pas le modifier) "),t.k0s(),t.j41(33,"nz-form-control",17),t.nrm(34,"input",18),t.k0s()(),t.j41(35,"nz-form-item",2)(36,"nz-form-label",19),t.EFF(37," Confirmer le nouveau mot de passe "),t.k0s(),t.j41(38,"nz-form-control",8),t.nrm(39,"input",20),t.DNE(40,ct,2,2,"ng-template",null,21,t.C5r),t.k0s()(),t.j41(42,"nz-form-item",2)(43,"nz-form-label",22),t.EFF(44," Mot de passe actuel * "),t.k0s(),t.j41(45,"nz-form-control",8),t.nrm(46,"input",23),t.DNE(47,ut,2,2,"ng-template",null,24,t.C5r),t.k0s()(),t.j41(49,"p",25),t.EFF(50," (Nous avons besoin de votre mot de passe actuel pour confirmer vos modifications.) "),t.k0s()(),t.j41(51,"nz-form-item",2)(52,"nz-form-control")(53,"button",26),t.EFF(54," Enregistrer "),t.k0s()()()()),2&o){const c=t.sdS(19),u=t.sdS(26),_=t.sdS(41),Ft=t.sdS(48);t.R7$(2),t.Y8G("formGroup",i.userForm),t.R7$(14),t.Y8G("nzErrorTip",c),t.R7$(7),t.Y8G("nzErrorTip",u),t.R7$(15),t.Y8G("nzErrorTip",_),t.R7$(7),t.Y8G("nzErrorTip",Ft),t.R7$(8),t.Y8G("nzLoading",i.loadingUser)}},dependencies:[p.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,s.$R,f.Uq,f.e,d.CA,d.Ls,d.Mo,d.zS,k.Sy,E.aO,C.c,b.p],encapsulation:2,changeDetection:0})}return n})(),title:"D\xe9tails de compte - Bacola Mon compte"},{path:"wishlists",redirectTo:"/guest/wishlist"},{path:"",component:(()=>{class n{constructor(e,o,i,c){this.route=e,this.router=o,this.message=i,this.loggedService=c}ngOnInit(){this.user=this.loggedService.user,this._fetchParams()}_fetchParams(){"true"==this.route.snapshot.queryParams.alreadyLogged&&(this.message.success("Vous \xeates d\xe9j\xe0 connect\xe9 !"),this.router.navigateByUrl("/account"))}logout(){this.loggedService.logout(),this.message.success("Vous \xeates d\xe9connect\xe9 avec succ\xe8s !")}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(m.nX),t.rXU(m.Ix),t.rXU(g.xh),t.rXU(F.k))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-page-dashboard"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"f-14"],["routerLink","/",1,"lien-underline","f-500",3,"click"],[1,"f-14","m-t-20"],["routerLink","/account/orders",1,"lien-underline","f-500"],["routerLink","/account/addresses",1,"lien-underline","f-500"],["routerLink","/account/details",1,"lien-underline","f-500"]],template:function(o,i){1&o&&t.DNE(0,pt,20,1,"ng-container",0),2&o&&t.Y8G("ngIf",i.user)},dependencies:[m.Wk,p.bT],encapsulation:2,changeDetection:0})}return n})(),title:"Tableau de bord - Bacola Mon compte"}]}];let ht=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({imports:[m.iI.forChild(gt),m.iI]})}return n})();var ft=a(2497);let _t=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.$C({type:n});static#n=this.\u0275inj=t.G2t({providers:[x.A,w.Q,j.u],imports:[ht,ft.G]})}return n})()}}]);